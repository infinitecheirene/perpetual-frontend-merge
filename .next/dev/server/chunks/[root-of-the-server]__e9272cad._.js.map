{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/raiza/OneDrive/Documents/Github/perpetual_merged/perpetual_frontend/app/api/admin/business-partners/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\"\r\nimport { cookies } from \"next/headers\"\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000/api\"\r\n\r\nexport async function GET(req: NextRequest) {\r\n  try {\r\n    const cookieStore = await cookies()\r\n    const token = cookieStore.get(\"auth_token\")?.value\r\n\r\n    if (!token) {\r\n      return NextResponse.json({ success: false, message: \"Unauthorized\" }, { status: 401 })\r\n    }\r\n\r\n    const url = new URL(req.url)\r\n    const queryParams = url.searchParams.toString()\r\n\r\n    console.log(\"Fetching admin businesses from:\", `${API_URL}/admin/business-partners${queryParams ? '?' + queryParams : ''}`)\r\n\r\n    const res = await fetch(`${API_URL}/admin/business-partners${queryParams ? '?' + queryParams : ''}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        Accept: \"application/json\",\r\n        \"X-Requested-With\": \"XMLHttpRequest\",\r\n      },\r\n    })\r\n\r\n    console.log(\"Laravel response status:\", res.status)\r\n\r\n    const contentType = res.headers.get(\"content-type\")\r\n    let data\r\n\r\n    if (contentType?.includes(\"application/json\")) {\r\n      data = await res.json()\r\n      console.log(\"Laravel response data:\", data)\r\n    } else {\r\n      const text = await res.text()\r\n      console.error(\"Non-JSON response from Laravel:\", text)\r\n      return NextResponse.json({\r\n        success: false,\r\n        message: \"Invalid response from server\",\r\n        debug: text.substring(0, 500) // First 500 chars for debugging\r\n      }, { status: 500 })\r\n    }\r\n\r\n    return NextResponse.json(data, { status: res.status })\r\n  } catch (err) {\r\n    console.error(\"Server error:\", err)\r\n    return NextResponse.json({\r\n      success: false,\r\n      message: \"Server error\",\r\n      error: err instanceof Error ? err.message : \"Unknown error\",\r\n      details: err instanceof Error ? err.stack : undefined\r\n    }, { status: 500 })\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAE5C,eAAe,IAAI,GAAgB;IACxC,IAAI;QACF,MAAM,cAAc,MAAM,IAAA,sLAAO;QACjC,MAAM,QAAQ,YAAY,GAAG,CAAC,eAAe;QAE7C,IAAI,CAAC,OAAO;YACV,OAAO,0LAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAO,SAAS;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACtF;QAEA,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;QAC3B,MAAM,cAAc,IAAI,YAAY,CAAC,QAAQ;QAE7C,QAAQ,GAAG,CAAC,mCAAmC,GAAG,QAAQ,wBAAwB,EAAE,cAAc,MAAM,cAAc,IAAI;QAE1H,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,wBAAwB,EAAE,cAAc,MAAM,cAAc,IAAI,EAAE;YACnG,SAAS;gBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAChC,QAAQ;gBACR,oBAAoB;YACtB;QACF;QAEA,QAAQ,GAAG,CAAC,4BAA4B,IAAI,MAAM;QAElD,MAAM,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC;QACpC,IAAI;QAEJ,IAAI,aAAa,SAAS,qBAAqB;YAC7C,OAAO,MAAM,IAAI,IAAI;YACrB,QAAQ,GAAG,CAAC,0BAA0B;QACxC,OAAO;YACL,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ,KAAK,CAAC,mCAAmC;YACjD,OAAO,0LAAY,CAAC,IAAI,CAAC;gBACvB,SAAS;gBACT,SAAS;gBACT,OAAO,KAAK,SAAS,CAAC,GAAG,KAAK,gCAAgC;YAChE,GAAG;gBAAE,QAAQ;YAAI;QACnB;QAEA,OAAO,0LAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ,IAAI,MAAM;QAAC;IACtD,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,0LAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,OAAO,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC5C,SAAS,eAAe,QAAQ,IAAI,KAAK,GAAG;QAC9C,GAAG;YAAE,QAAQ;QAAI;IACnB;AACF"}}]
}