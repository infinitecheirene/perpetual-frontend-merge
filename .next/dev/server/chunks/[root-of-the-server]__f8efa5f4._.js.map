{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/raiza/OneDrive/Documents/Github/perpetual_merged/perpetual_frontend/app/api/news/published/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000/api\"\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const searchParams = request.nextUrl.searchParams\r\n    const queryString = searchParams.toString()\r\n    \r\n    // Construct the full endpoint URL\r\n    const endpoint = `${API_URL}/news/published${queryString ? `?${queryString}` : ''}`\r\n    \r\n    console.log(\"=\".repeat(50))\r\n    console.log(\"[News API] üîç Fetching from:\", endpoint)\r\n    console.log(\"[News API] üìç Base API_URL:\", API_URL)\r\n    console.log(\"[News API] üîó Query params:\", queryString)\r\n    console.log(\"=\".repeat(50))\r\n\r\n    const response = await fetch(endpoint, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      cache: 'no-store'\r\n    })\r\n\r\n    const responseText = await response.text()\r\n    console.log(\"[News API] ‚úÖ Response status:\", response.status)\r\n    console.log(\"[News API] üìù Response preview:\", responseText.substring(0, 500))\r\n\r\n    if (!response.ok) {\r\n      console.error(\"[News API] ‚ùå Error - Full response:\", responseText)\r\n      try {\r\n        const errorData = JSON.parse(responseText)\r\n        return NextResponse.json(\r\n          {\r\n            success: false,\r\n            error: errorData.message || \"Failed to fetch news\",\r\n            details: errorData.errors || errorData,\r\n          },\r\n          { status: response.status },\r\n        )\r\n      } catch {\r\n        return NextResponse.json(\r\n          { \r\n            success: false,\r\n            error: \"Failed to fetch news from server\",\r\n            details: responseText \r\n          }, \r\n          { status: response.status }\r\n        )\r\n      }\r\n    }\r\n\r\n    const data = JSON.parse(responseText)\r\n    console.log(\"[News API] üéâ Success! News items:\", data.data?.data?.length || 0)\r\n    return NextResponse.json(data)\r\n  } catch (error) {\r\n    console.error(\"[News API] üí• Fatal error:\", error)\r\n    return NextResponse.json(\r\n      { \r\n        success: false,\r\n        error: error instanceof Error ? error.message : \"Unknown error\" \r\n      }, \r\n      { status: 500 }\r\n    )\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAE5C,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;QACjD,MAAM,cAAc,aAAa,QAAQ;QAEzC,kCAAkC;QAClC,MAAM,WAAW,GAAG,QAAQ,eAAe,EAAE,cAAc,CAAC,CAAC,EAAE,aAAa,GAAG,IAAI;QAEnF,QAAQ,GAAG,CAAC,IAAI,MAAM,CAAC;QACvB,QAAQ,GAAG,CAAC,gCAAgC;QAC5C,QAAQ,GAAG,CAAC,+BAA+B;QAC3C,QAAQ,GAAG,CAAC,+BAA+B;QAC3C,QAAQ,GAAG,CAAC,IAAI,MAAM,CAAC;QAEvB,MAAM,WAAW,MAAM,MAAM,UAAU;YACrC,QAAQ;YACR,SAAS;gBACP,QAAQ;gBACR,gBAAgB;YAClB;YACA,OAAO;QACT;QAEA,MAAM,eAAe,MAAM,SAAS,IAAI;QACxC,QAAQ,GAAG,CAAC,iCAAiC,SAAS,MAAM;QAC5D,QAAQ,GAAG,CAAC,mCAAmC,aAAa,SAAS,CAAC,GAAG;QAEzE,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,uCAAuC;YACrD,IAAI;gBACF,MAAM,YAAY,KAAK,KAAK,CAAC;gBAC7B,OAAO,0LAAY,CAAC,IAAI,CACtB;oBACE,SAAS;oBACT,OAAO,UAAU,OAAO,IAAI;oBAC5B,SAAS,UAAU,MAAM,IAAI;gBAC/B,GACA;oBAAE,QAAQ,SAAS,MAAM;gBAAC;YAE9B,EAAE,OAAM;gBACN,OAAO,0LAAY,CAAC,IAAI,CACtB;oBACE,SAAS;oBACT,OAAO;oBACP,SAAS;gBACX,GACA;oBAAE,QAAQ,SAAS,MAAM;gBAAC;YAE9B;QACF;QAEA,MAAM,OAAO,KAAK,KAAK,CAAC;QACxB,QAAQ,GAAG,CAAC,sCAAsC,KAAK,IAAI,EAAE,MAAM,UAAU;QAC7E,OAAO,0LAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,0LAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}